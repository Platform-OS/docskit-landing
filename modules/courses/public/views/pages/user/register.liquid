---
layout: modules/courses/courses
---
{% liquid
  function current_user = 'modules/user/lib/queries/user/current'
  function can = 'modules/permission/lib/helpers/can_do', requester: current_user, do: 'sessions.create'
  unless can
    redirect_to '/course'
  endunless
%}

{% capture register_form %}
  {% theme_render_rc 'components/atoms/heading', level: 2, content: 'Sign up', classes: 'heading' %}
  <form action="/user/create" method="post" class="user-form">
    <input type="hidden" name="authenticity_token" value="{{ context.authenticity_token }}">

    {% liquid
      assign input_params = null | parse_json | hash_merge: type: 'text', name: 'firstname'
      assign label_params = null | parse_json | hash_merge: content: 'Firstname'

      theme_render_rc 'components/molecules/formfield', input_params: input_params, label_params: label_params, classes: 'user-form__fieldset'

      assign input_params = null | parse_json | hash_merge: type: 'text', name: 'lastname'
      assign label_params = null | parse_json | hash_merge: content: 'Lastname'

      theme_render_rc 'components/molecules/formfield', input_params: input_params, label_params: label_params, classes: 'user-form__fieldset'

      assign input_params = null | parse_json | hash_merge: type: 'text', name: 'company'
      assign label_params = null | parse_json | hash_merge: content: 'Company'

      theme_render_rc 'components/molecules/formfield', input_params: input_params, label_params: label_params, classes: 'user-form__fieldset'
      assign input_params = null | parse_json | hash_merge: type: 'email', name: 'email'
      assign label_params = null | parse_json | hash_merge: content: 'E-mail'

      theme_render_rc 'components/molecules/formfield', input_params: input_params, label_params: label_params, classes: 'user-form__fieldset'

      assign input_params = null | parse_json | hash_merge: type: 'password', name: 'password'
      assign label_params = null | parse_json | hash_merge: content: 'Password'
      theme_render_rc 'components/molecules/formfield', input_params: input_params, label_params: label_params, classes: 'user-form__fieldset'

      theme_render_rc 'components/atoms/button', content: 'Sign up', type: 'submit'
    %}
    <div class="user-form__footer">Already have an account? <a href="/user/login">Click here to log in!</a></div>
  </form>
{% endcapture %}

<div class="container">
  {% theme_render_rc 'components/atoms/card', content: register_form, classes: 'form-panel' %}
</div>
